# Contributor: HIME team
pkgname=hime
pkgver=0.9.10
pkgrel=1
pkgdesc="A GTK2+/GTK3+ based universal input method platform"
arch=('i686' 'x86_64')
url="http://hime.luna.com.tw/"
license=('LGPL2' 'FDL' 'GPL2')
depends=('gtk2' 'libxtst')
makedepends=('git' 'gettext' 'gtk3' 'qt4' 'anthy' 'libchewing')
optdepends=('gtk3: enable gtk3 im module' 'qt4: enable qt4 im module' 'anthy: enable Anthy input method' 'libchewing: enable Chewing input method')
options=(!strip)
"${pkgname}::git://github.com/hime-ime/hime.git#tag=v${pkgver}"
sha512sums=('SKIP')
install=hime.install

pkgver() {
  cd "$srcdir/repo"
  git describe --long | sed -E 's/([^-]*-g)/r\1/;s/-/./g'
}

build() {
        cd "${srcdir}/${pkgname}"
	./configure --prefix=/usr --disable-lib64
	make
}

package() {
	cd "${srcdir}/${pkgname}"
	make DESTDIR="${pkgdir}" install

	install -dm755 "${pkgdir}/usr/share/licenses/${pkgname}/"
	# install licence files
	install -Dm644 fdl-1.2.txt gpl-2.0.txt lgpl-2.1.txt "${pkgdir}/usr/share/licenses/${pkgname}/"
}
